> if(kakao)dev 2022의 키노트 세션의 [1015 장애원인 분석](https://if.kakao.com/2022/session/111) 영상을 보고 정리한 글입니다.

## 개요
지난 10월 15일 SK C&C 판교 데이터센터 화재로 인한 카카오 서비스 장애의 원인을 객관적으로 규명

### 1015 장애 상황
- 2022 1015 오후 3시 19분경 
    - 카카오가 이용 중인 SK C&C 데이터센터 화재 발생
    - 카카오의 전반적인 서비스 마비
- 서비스 담당 서버가 이중화되어 있음에도 장애가 발생함.
    - 카카오톡 메세지 수발신 등의 주요 기능은 우선 복구되었지만, 모든 서비스가 복구 완료되기까지 상당한 시일이 소요됨.
- 원인 분석 결과, 이중화와 위기 대응 과정에 미흡함이 있었음.

## 원인 분석: 데이터센터 간 이중화
- 데이터센터 간의 모든 시스템이 이중화되어 있지 않아 복구에 차질이 발생함.
- 일부 시스템이 판교 데이터센터 내에서만 이중화가 되어 있어 복구가 어려웠음.
    - 다른 데이터센터에 이중화되어 있지 않았던 시스템의 복구가 늦어짐.
- 하나의 데이터센터에서 장애가 발생하면 다른 데이터센터로 자동 전환해주는 시스템이 작동해야 하는데, 이마저도 판교 데이터센터에만 이중화가 되어 있었음.
    - 수동으로 전환 작업을 진행했기 때문에 복구가 늦어짐
- 서비스 개발과 관리를 위한 운영 관리 도구가 필요한데, 이런 도구들의 이중화가 미흡함.
    - 도구들의 안정성 확보에 미흡함.
    - 컨테이너 이미지를 저장하고 관리하는 시스템이나, 일부 모니터링 도구들을 사용할 수 없게 되어 복구가 늦어짐.
- 이중화 전환 후 가용자원 부족
    - 판교 데이터센터 전체를 대신할 가용자원이 충분치 않았기 때문에, 판교 데이터센터의 전원이 들어와 시스템이 정상화되기 전까지 복구를 완료할 수 없었음.
- 전체 시스템의 이중화 수준은 가장 약한 시스템의 이중화 수준을 따라가기 때문에, 개별 시스템의 미흡한 이중화가 전체적인 장애를 유발함.
- 개별 부서나 시스템마다 다른 이중화 수준 및 체계, 부족한 상면 등으로 문제가 생기지 않도록 회사 차원의 체계적인 이중화가 부족했음.
## 장애를 빠르게 해결하지 못한 원인
### 장애 복구를 위한 인력과 자원 부족
- 평소 이중화나 장애 대응 체계를 갖추고 있었더라도, 데이터센터 전체 장애 상황은 준비가 부족했음.
### 장애 대응을 위한 커뮤니케이션 채널 혼선
- 사내 커뮤니케이션 채널로 카카오톡과 카카오워크를 사용함.
- 해당 채널을 사용할 수 없을 때 사용할 커뮤니케이션 채널이 없었음.
### 재해 초기 컨트롤 타워 부재
- 카카오와 공동체, 그리고 개별 조직이 동시다발적으로 장애에 대응함.
- 하지만 전체적인 조율과 협업을 지원하는 전사 조직이 사전에 세팅되어 있지 않음.

